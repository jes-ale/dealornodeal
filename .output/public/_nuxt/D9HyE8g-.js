import{_ as v}from"./CUO2LHPb.js";import{f as w,j as g,I as k,D as x,k as i,l as C,o as n,c,b as u,w as m,a as B,g as E}from"./U2fQd9-U.js";import{A as U,F as D}from"./e3dyQpmn.js";import{u as N}from"./C6nEOAZn.js";import{E as a}from"./DPlZ69ra.js";import"./CJQxszXc.js";import"./CdD7BwAs.js";const V={class:"w-full h-full flex items-center justify-center"},A={key:1},O=w({__name:"index",setup(F){const d=[{name:"username",label:"Username",type:"text"},{name:"verified",label:"Verified",type:"boolean"},{name:"email",label:"Email",type:"text"},{name:"created",label:"Created",type:"date",readonly:!0},{name:"updated",label:"Updated",type:"date",readonly:!0},{name:"avatar",label:"Avatar",type:"text"},{name:"roles",label:"Roles",type:"selection",options:["admin","user","guest"]},{name:"contact_fk",label:"Contact",type:"many2one"},{name:"company_id",label:"Company",type:"many2one"}],l=g({}),p=k(),s=x(),t=i(()=>p.params.id),f=i(()=>t.value?"Update User":"Create User"),{pb:o}=N(),y=async()=>{try{if(t.value){a.emit("loading",{show:!0});const e=await o.collection("internal_users").getOne(t.value);l.value=e}}catch(e){console.error("Error fetching user data:",e)}finally{a.emit("loading",{show:!1})}};C(()=>{y()});const _=async e=>{try{t.value?(a.emit("loading",{show:!0}),await o.collection("internal_users").update(t.value,e)):(a.emit("loading",{show:!0}),await o.collection("internal_users").create(e)),s.push("/user/list")}catch(r){console.error("Error submitting form:",r)}finally{a.emit("loading",{show:!1})}},b=()=>{console.log("Cancel clicked"),s.back()};return(e,r)=>{const h=v;return n(),c("div",null,[u(h,{name:"default"},{default:m(()=>[B("div",V,[e.loading?(n(),c("div",A,"Loading...")):(n(),E(D,{key:0,title:f.value,fields:d,initialData:l.value,collectionName:"internal_users",onSubmit:_},{buttons:m(()=>[u(U,{type:"button",icon:"fluent:password-reset-48-filled",label:"Psswd",onClick:b})]),_:1},8,["title","initialData"]))])]),_:1})])}}});export{O as default};
