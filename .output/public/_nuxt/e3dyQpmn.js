import{u as F}from"./C6nEOAZn.js";import{j as y,l as x,h as U,f as $,x as H,k as D,m as z,i as G,o as c,c as m,a as d,t as v,_ as P,p as Z,e as ee,F as S,r as k,n as I,s as R,G as te,J as le,u as g,K as ae,b as _,w as B,g as q,L as oe,E as ne,M as se}from"./U2fQd9-U.js";import{I as M}from"./CJQxszXc.js";import{o as h,I as j,u as A,t as re,i as C,A as N,l as ue,N as L,a as w}from"./CdD7BwAs.js";function T(e,n){if(e)return e;let a=n??"button";if(typeof a=="string"&&a.toLowerCase()==="button")return"button"}function ie(e,n){let a=y(T(e.value.type,e.value.as));return x(()=>{a.value=T(e.value.type,e.value.as)}),U(()=>{var l;a.value||h(n)&&h(n)instanceof HTMLButtonElement&&!((l=h(n))!=null&&l.hasAttribute("type"))&&(a.value="button")}),a}var ce=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ce||{});let J=Symbol("DisclosureContext");function E(e){let n=G(J,null);if(n===null){let a=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,E),a}return n}let Q=Symbol("DisclosurePanelContext");function de(){return G(Q,null)}let pe=$({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:n,attrs:a}){let l=y(e.defaultOpen?0:1),t=y(null),u=y(null),o={buttonId:y(`headlessui-disclosure-button-${j()}`),panelId:y(`headlessui-disclosure-panel-${j()}`),disclosureState:l,panel:t,button:u,toggleDisclosure(){l.value=A(l.value,{0:1,1:0})},closeDisclosure(){l.value!==1&&(l.value=1)},close(s){o.closeDisclosure();let i=s?s instanceof HTMLElement?s:s.value instanceof HTMLElement?h(s):h(o.button):h(o.button);i==null||i.focus()}};return H(J,o),re(D(()=>A(l.value,{0:C.Open,1:C.Closed}))),()=>{let{defaultOpen:s,...i}=e,r={open:l.value===0,close:o.close};return N({theirProps:i,ourProps:{},slot:r,slots:n,attrs:a,name:"Disclosure"})}}}),be=$({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:n,slots:a,expose:l}){let t=E("DisclosureButton"),u=de(),o=D(()=>u===null?!1:u.value===t.panelId.value);x(()=>{o.value||e.id!==null&&(t.buttonId.value=e.id)}),z(()=>{o.value||(t.buttonId.value=null)});let s=y(null);l({el:s,$el:s}),o.value||U(()=>{t.button.value=s.value});let i=ie(D(()=>({as:e.as,type:n.type})),s);function r(){var f;e.disabled||(o.value?(t.toggleDisclosure(),(f=h(t.button))==null||f.focus()):t.toggleDisclosure())}function p(f){var V;if(!e.disabled)if(o.value)switch(f.key){case w.Space:case w.Enter:f.preventDefault(),f.stopPropagation(),t.toggleDisclosure(),(V=h(t.button))==null||V.focus();break}else switch(f.key){case w.Space:case w.Enter:f.preventDefault(),f.stopPropagation(),t.toggleDisclosure();break}}function b(f){switch(f.key){case w.Space:f.preventDefault();break}}return()=>{var f;let V={open:t.disclosureState.value===0},{id:W,...X}=e,Y=o.value?{ref:s,type:i.value,onClick:r,onKeydown:p}:{id:(f=t.buttonId.value)!=null?f:W,ref:s,type:i.value,"aria-expanded":t.disclosureState.value===0,"aria-controls":t.disclosureState.value===0||h(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:r,onKeydown:p,onKeyup:b};return N({ourProps:Y,theirProps:X,slot:V,attrs:n,slots:a,name:"DisclosureButton"})}}}),me=$({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:a,expose:l}){let t=E("DisclosurePanel");x(()=>{e.id!==null&&(t.panelId.value=e.id)}),z(()=>{t.panelId.value=null}),l({el:t.panel,$el:t.panel}),H(Q,t.panelId);let u=ue(),o=D(()=>u!==null?(u.value&C.Open)===C.Open:t.disclosureState.value===0);return()=>{var s;let i={open:t.disclosureState.value===0,close:t.close},{id:r,...p}=e,b={id:(s=t.panelId.value)!=null?s:r,ref:t.panel};return N({ourProps:b,theirProps:p,slot:i,attrs:n,slots:a,features:L.RenderStrategy|L.Static,visible:o.value,name:"DisclosurePanel"})}}});const fe={class:"p-4 mb-4"},ve=["for"],ye=["id","value"],ge={__name:"TextField",props:{id:String,label:String,modelValue:String},emits:["update:modelValue"],setup(e,{emit:n}){const a=n,l=t=>{a("update:modelValue",t.target.value)};return(t,u)=>(c(),m("div",fe,[d("label",{for:e.id,class:"block mb-2"},v(e.label),9,ve),d("input",{type:"text",id:e.id,value:e.modelValue,onInput:l,class:"border border-black p-2 w-full"},null,40,ye)]))}},K=ge,he={class:"border border-black p-4 mb-4"},_e=["for"],Se=["id","value"],ke={__name:"NumberField",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const a=n,l=t=>{a("update:modelValue",parseFloat(t.target.value))};return(t,u)=>(c(),m("div",he,[d("label",{for:e.id,class:"block mb-2"},v(e.label),9,_e),d("input",{type:"number",id:e.id,value:e.modelValue,onInput:l,class:"border p-2 w-full"},null,40,Se)]))}},xe=ke,we={class:"p-4 mb-4"},$e=["for"],Ve=["id","value"],De={__name:"DatetimeField",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const a=n,l=t=>{a("update:modelValue",t.target.value)};return(t,u)=>(c(),m("div",we,[d("label",{for:e.id,class:"block mb-2"},v(e.label),9,$e),d("input",{type:"date",id:e.id,value:e.modelValue,onInput:l,class:"p-2 w-full border border-black"},null,40,Ve)]))}},Ce=De,Fe=e=>(Z("data-v-f0f52164"),e=e(),ee(),e),Ie={class:"p-4"},Be=["for"],qe={class:"relative inline-block w-10 h-6 select-none transition-all duration-200 ease-in-out"},Oe=["checked"],Me=Fe(()=>d("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300"},null,-1)),Pe={__name:"BooleanField",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const a=n,l=t=>{a("update:modelValue",t.target.checked)};return(t,u)=>(c(),m("div",Ie,[d("label",{for:e.id,class:"block mb-2"},v(e.label),9,Be),d("div",qe,[d("input",{type:"checkbox",id:"toggle",checked:e.modelValue,onChange:u[0]||(u[0]=o=>l(o)),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer transition-transform transform translate-x-0"},null,40,Oe),Me])]))}},Ne=P(Pe,[["__scopeId","data-v-f0f52164"]]),Ee={class:"p-4 mb-4"},je=["for"],Ae=["id","value"],Le=["value"],Te={__name:"SelectionField",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:[String,Number],required:!0},options:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:n}){const a=n,l=t=>{a("update:modelValue",t.target.value)};return(t,u)=>(c(),m("div",Ee,[d("label",{for:e.id,class:"block mb-2"},v(e.label),9,je),d("select",{id:e.id,value:e.modelValue,onInput:l,class:"border border-black p-2 w-full"},[(c(!0),m(S,null,k(e.options,o=>(c(),m("option",{key:o.value,value:o.value},v(o.label),9,Le))),128))],40,Ae)]))}},Ke=Te,Ue={class:"p-4 mb-4"},He={class:"block mb-2"},ze={class:"flex flex-wrap gap-2"},Ge=["onClick"],Re={class:"mt-2 flex flex-wrap gap-2"},Je={__name:"Many2ManyField",props:{label:String,collection:String,modelValue:Array},emits:["update:modelValue"],setup(e,{emit:n}){const{pb:a}=F(),l=e,t=n,u=y([]),o=y([...l.modelValue]),s=r=>o.value.some(p=>p.id===r.id),i=r=>{s(r)?o.value=o.value.filter(p=>p.id!==r.id):o.value.push(r),t("update:modelValue",o.value)};return x(async()=>{const r=await a.collection(l.collection).getFullList();u.value=r}),(r,p)=>(c(),m("div",Ue,[d("label",He,v(e.label),1),d("div",ze,[(c(!0),m(S,null,k(u.value,b=>(c(),m("div",{key:b.id,onClick:f=>i(b),class:I({"border border-black p-2 cursor-pointer":!0,"bg-blue-500 text-white":s(b),"bg-gray-100":!s(b)})},v(b.name),11,Ge))),128))]),d("div",Re,[(c(!0),m(S,null,k(o.value,b=>(c(),m("span",{key:b.id,class:"border border-black p-2 bg-blue-500 text-white"},v(b.name),1))),128))])]))}},Qe=Je,We={class:"p-4 mb-4"},Xe={class:"block mb-2"},Ye=["value"],Ze={__name:"Many2OneField",props:{label:String,collection:String,modelValue:[String,Number]},emits:["update:modelValue"],setup(e,{emit:n}){const{pb:a}=F(),l=e,t=n,u=y([]),o=y(l.modelValue);return x(async()=>{const s=await a.collection(l.collection).getFullList();u.value=s}),R(o,s=>{t("update:modelValue",s)}),(s,i)=>(c(),m("div",We,[d("label",Xe,v(e.label),1),te(d("select",{"onUpdate:modelValue":i[0]||(i[0]=r=>ae(o)?o.value=r:null),class:"border border-black p-2 w-full"},[(c(!0),m(S,null,k(g(u),r=>(c(),m("option",{key:r.id,value:r.id},v(r.name),9,Ye))),128))],512),[[le,g(o)]])]))}},et=Ze,tt={class:"p-4 mb-4"},lt={class:"block mb-2"},at={class:"flex flex-wrap gap-2 border border-black"},ot=["onClick"],nt={class:"mt-2 flex flex-wrap gap-2"},st={__name:"One2ManyField",props:{label:String,collection:String,modelValue:Array},emits:["update:modelValue"],setup(e,{emit:n}){const{pb:a}=F(),l=e,t=n,u=y([]),o=y([...l.modelValue]),s=r=>o.value.some(p=>p.id===r.id),i=r=>{s(r)?o.value=o.value.filter(p=>p.id!==r.id):o.value.push(r),t("update:modelValue",o.value)};return x(async()=>{const r=await a.collection(l.collection).getFullList();u.value=r}),(r,p)=>(c(),m("div",tt,[d("label",lt,v(e.label),1),d("div",at,[(c(!0),m(S,null,k(g(u),b=>(c(),m("div",{key:b.id,onClick:f=>i(b),class:I({"border p-2 cursor-pointer":!0,"bg-blue-500 text-white":s(b),"bg-gray-100":!s(b)})},v(b.name),11,ot))),128))]),d("div",nt,[(c(!0),m(S,null,k(g(o),b=>(c(),m("span",{key:b.id,class:"border p-2 bg-blue-500 text-white"},v(b.name),1))),128))])]))}},rt=st,ut=["type"],it=`
  w-16 h-16 flex flex-col items-center justify-center
  border border-black p-2 bg-rose-700 text-white
  hover:bg-rose-100 hover:text-rose-700 font-bold
`,ct=$({__name:"ActionButton",props:{type:{type:String,default:"button"},icon:{type:String,required:!0},label:{type:String,required:!0},onClick:{type:Function,default:()=>{}}},setup(e){return(n,a)=>(c(),m("button",{type:e.type,onClick:a[0]||(a[0]=(...l)=>e.onClick&&e.onClick(...l)),class:I(it)},[_(g(M),{icon:e.icon,class:"w-full h-full"},null,8,["icon"]),d("span",null,v(e.label),1)],8,ut))}}),O=P(ct,[["__scopeId","data-v-04d30417"]]),dt={class:"relative flex w-full h-full justify-start items-center flex-col"},pt={class:"left-0 top-0 w-full flex space-x-2 justify-end items-center bg-transparent p-4 z-10"},bt={class:"text-xl"},mt=$({__name:"FormView",props:{title:{type:String,default:"Generic Form"},fields:{type:Array,required:!0},initialData:{type:Object,default:()=>({})},collectionName:{type:String,required:!0},onSubmit:{type:Function,required:!0}},setup(e){const{pb:n}=F(),a=e,l=y({}),t=i=>{switch(i){case"text":return K;case"number":return xe;case"date":return Ce;case"boolean":return Ne;case"selection":return Ke;case"many2many":return Qe;case"many2one":return et;case"one2many":return rt;default:return K}},u=async()=>{try{let i;l.value.id?i=await n.collection(a.collectionName).update(l.value.id,l.value):i=await n.collection(a.collectionName).create(l.value),a.onSubmit(i)}catch(i){console.error("Error submitting form:",i)}},o=()=>{console.log("Cancel clicked")},s=()=>{console.log("Print clicked")};return y(!1),R(a,()=>{console.log("props.initialData",a.initialData),l.value={...a.initialData}}),(i,r)=>(c(),m("div",dt,[d("div",pt,[d("h2",bt,v(e.title),1),_(O,{type:"submit",icon:"mdi:content-save",label:"Submit",onClick:u}),_(O,{type:"button",icon:"mdi:file-undo",label:"Cancel",onClick:o}),_(O,{type:"button",icon:"mdi:printer",label:"Print",onClick:s}),_(g(pe),null,{default:B(({open:p})=>[_(g(be),{class:"w-16 h-16 flex flex-col items-center justify-center border border-black p-2 bg-rose-700 text-white hover:bg-rose-100 hover:text-rose-700 font-bold"},{default:B(()=>[p?(c(),q(g(M),{key:0,icon:"mdi:eye",class:"w-full h-full"})):(c(),q(g(M),{key:1,icon:"mdi:eye-off",class:"w-full h-full"})),d("span",null,v(p?"Hide":"Show"),1)]),_:2},1024),_(g(me),null,{default:B(()=>[d("div",{class:I(["flex space-x-2 transition-transform duration-300 transform",{"translate-x-0":p,"translate-x-full":!p}])},[oe(i.$slots,"buttons",{},void 0,!0)],2)]),_:2},1024)]),_:3})]),d("form",{onSubmit:ne(u,["prevent"]),class:"p-4 mb-4 space-y-4 w-full overflow-auto"},[(c(!0),m(S,null,k(e.fields,(p,b)=>(c(),q(se(t(p.type)),{class:"w-full",key:b,modelValue:g(l)[p.name],"onUpdate:modelValue":f=>g(l)[p.name]=f,label:p.label,options:p.options||[]},null,8,["modelValue","onUpdate:modelValue","label","options"]))),128))],32)]))}}),ht=P(mt,[["__scopeId","data-v-b9fd3e90"]]);export{O as A,ht as F};
