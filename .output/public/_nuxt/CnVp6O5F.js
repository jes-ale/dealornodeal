import{_ as h}from"./E63WEL4W.js";import{h as v,r as w,H as g,E as C,g as c,i as x,o as k,c as E,b as o,w as u,a as B}from"./qlvJx28p.js";import{F as U,A as m}from"./BGdINESg.js";import{u as F}from"./DKQTjIAd.js";import{E as a}from"./DPlZ69ra.js";import"./Cncj-WJO.js";import"./BSAT8QnR.js";const N={class:"w-full h-full flex items-center justify-center"},H=v({__name:"[id]",props:{id:{type:String,required:!1}},setup(V){const d=[{name:"username",label:"Username",type:"text"},{name:"verified",label:"Verified",type:"boolean"},{name:"email",label:"Email",type:"text"},{name:"created",label:"Created",type:"date",readonly:!0},{name:"updated",label:"Updated",type:"date",readonly:!0},{name:"avatar",label:"Avatar",type:"text"},{name:"roles",label:"Roles",type:"selection",options:["admin","user","guest"]},{name:"contact_fk",label:"Contact",type:"many2one"},{name:"company_id",label:"Company",type:"many2one"}],l=w(),p=g(),s=C(),t=c(()=>p.params.id),f=c(()=>t.value?"Update User":"Create User"),{pb:n}=F(),r=async()=>{try{if(t.value){a.emit("loading",{show:!0});const e=await n.collection("internal_users").getOne(t.value);console.log("user",e),l.value=e}}catch(e){console.error("Error fetching user data:",e)}finally{a.emit("loading",{show:!1})}};x(()=>{r()});const y=async e=>{try{t.value?(a.emit("loading",{show:!0}),await n.collection("internal_users").update(t.value,e)):(a.emit("loading",{show:!0}),await n.collection("internal_users").create(e)),s.push("/user/list")}catch(i){console.error("Error submitting form:",i)}finally{a.emit("loading",{show:!1})}},_=()=>{console.log("Cancel clicked"),s.back()};return(e,i)=>{const b=h;return k(),E("div",null,[o(b,{name:"default"},{default:u(()=>[B("div",N,[o(U,{title:f.value,fields:d,initialData:l.value,collectionName:"internal_users",onSubmit:y},{buttons:u(()=>[o(m,{type:"button",icon:"fluent:password-reset-48-filled",label:"Psswd",onClick:_}),o(m,{type:"button",icon:"mdi:cloud-refresh",label:"Fetch",onClick:r})]),_:1},8,["title","initialData"])])]),_:1})])}}});export{H as default};
