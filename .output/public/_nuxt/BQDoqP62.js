import{_ as h}from"./CUO2LHPb.js";import{f as v,j as w,I as g,D as C,k as c,l as k,o as x,c as B,b as o,w as u,a as E}from"./U2fQd9-U.js";import{F as U,A as m}from"./e3dyQpmn.js";import{u as D}from"./C6nEOAZn.js";import{E as a}from"./DPlZ69ra.js";import"./CJQxszXc.js";import"./CdD7BwAs.js";const F={class:"w-full h-full flex items-center justify-center"},q=v({__name:"[id]",props:{id:{type:String,required:!1}},setup(N){const d=[{name:"username",label:"Username",type:"text"},{name:"verified",label:"Verified",type:"boolean"},{name:"email",label:"Email",type:"text"},{name:"created",label:"Created",type:"date",readonly:!0},{name:"updated",label:"Updated",type:"date",readonly:!0},{name:"avatar",label:"Avatar",type:"text"},{name:"roles",label:"Roles",type:"selection",options:["admin","user","guest"]},{name:"contact_fk",label:"Contact",type:"many2one"},{name:"company_id",label:"Company",type:"many2one"}],l=w(),p=g(),s=C(),t=c(()=>p.params.id),f=c(()=>t.value?"Update User":"Create User"),{pb:n}=D(),r=async()=>{try{if(t.value){a.emit("loading",{show:!0});const e=await n.collection("internal_users").getOne(t.value);console.log("user",e),l.value=e}}catch(e){console.error("Error fetching user data:",e)}finally{a.emit("loading",{show:!1})}};k(()=>{r()});const y=async e=>{try{t.value?(a.emit("loading",{show:!0}),await n.collection("internal_users").update(t.value,e)):(a.emit("loading",{show:!0}),await n.collection("internal_users").create(e)),s.push("/user/list")}catch(i){console.error("Error submitting form:",i)}finally{a.emit("loading",{show:!1})}},_=()=>{console.log("Cancel clicked"),s.back()};return(e,i)=>{const b=h;return x(),B("div",null,[o(b,{name:"default"},{default:u(()=>[E("div",F,[o(U,{title:f.value,fields:d,initialData:l.value,collectionName:"internal_users",onSubmit:y},{buttons:u(()=>[o(m,{type:"button",icon:"fluent:password-reset-48-filled",label:"Psswd",onClick:_}),o(m,{type:"button",icon:"mdi:cloud-refresh",label:"Fetch",onClick:r})]),_:1},8,["title","initialData"])])]),_:1})])}}});export{q as default};
